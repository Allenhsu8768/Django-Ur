(function(t){function e(e){for(var o,s,c=e[0],a=e[1],u=e[2],_=0,d=[];_<c.length;_++)s=c[_],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],o=!0,c=1;c<r.length;c++){var a=r[c];0!==n[a]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=r[0]))}return t}var o={},n={app:0},i=[];function s(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=o,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(r,o,function(e){return t[e]}.bind(null,o));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=a;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0c10":function(t,e,r){"use strict";r("3a04")},"324d":function(t,e,r){},"3a04":function(t,e,r){},"3cea":function(t,e,r){"use strict";r("6307")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("Header"),r("Main")],1)},i=[],s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},c=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"header"},[r("span"),r("div",{staticClass:"title-icon-name"},[r("p",[r("i",{staticClass:"icon"}),t._v("UrMart")])])])}],a={name:"Header"},u=a,l=(r("e370"),r("2877")),_=Object(l["a"])(u,s,c,!1,null,"e434fbe4",null),d=_.exports,p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("AddOrder",{attrs:{select_list:t.select_list}}),r("Product_table",{attrs:{select_list:t.select_list}}),r("Order_info",{attrs:{order_list:t.order_list}}),r("Top",{attrs:{top_list:t.top_list}})],1)},f=[],h=(r("159b"),r("4de4"),r("bc3a")),v=r.n(h),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"addorder"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.select_product_info.product_id,expression:"select_product_info.product_id"}],staticClass:"select-product",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.select_product_info,"product_id",e.target.multiple?r:r[0])}}},[r("option",{attrs:{disabled:"",value:""}},[t._v("Select-Product")]),t._l(t.select_list,(function(e){return r("option",{key:e.id,domProps:{value:e.product_id}},[t._v(" "+t._s(e.product_id))])}))],2),r("div",{staticClass:"product-amount"},[r("button",{on:{click:function(e){t.select_product_info.product_amount++}}},[t._v("+")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.select_product_info.product_amount,expression:"select_product_info.product_amount",modifiers:{number:!0}}],staticClass:"amount_input",attrs:{type:"number",placeholder:"數量",onfocus:"this.placeholder=''",onblur:"this.placeholder='數量'"},domProps:{value:t.select_product_info.product_amount},on:{input:function(e){e.target.composing||t.$set(t.select_product_info,"product_amount",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("button",{on:{click:t.deincrement}},[t._v("-")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.select_product_info.customer_id,expression:"select_product_info.customer_id"}],staticClass:"entercustomerid",attrs:{type:"text",placeholder:"請輸入用戶ID",onfocus:"this.placeholder=''",onblur:"this.placeholder='請輸入用戶ID'"},domProps:{value:t.select_product_info.customer_id},on:{input:function(e){e.target.composing||t.$set(t.select_product_info,"customer_id",e.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:t.select_product_info.isVip,expression:"select_product_info.isVip"}],staticClass:"isvipcheck",attrs:{type:"checkbox",id:"1"},domProps:{checked:Array.isArray(t.select_product_info.isVip)?t._i(t.select_product_info.isVip,null)>-1:t.select_product_info.isVip},on:{change:function(e){var r=t.select_product_info.isVip,o=e.target,n=!!o.checked;if(Array.isArray(r)){var i=null,s=t._i(r,i);o.checked?s<0&&t.$set(t.select_product_info,"isVip",r.concat([i])):s>-1&&t.$set(t.select_product_info,"isVip",r.slice(0,s).concat(r.slice(s+1)))}else t.$set(t.select_product_info,"isVip",n)}}}),r("label",{attrs:{for:"1"}},[t._v("是否為Vip用戶")])]),r("button",{staticClass:"sendbtn",on:{click:t.sendordermsg}},[t._v("新增訂單")]),t.error_list.length>0?r("div",{staticClass:"error_contrainer"},t._l(t.error_list,(function(e,o){return r("p",{key:o},[t._v(" "+t._s(o+1)+"."+t._s(e)+" ")])})),0):t._e()])},b=[];v.a.defaults.xsrfHeaderName="X-CSRFToken",v.a.defaults.xsrfCookieName="csrftoken";var y={name:"Addorder",data:function(){return{select_product_info:{product_id:"",product_amount:"",customer_id:"",isVip:!1},error_list:[]}},props:["select_list"],methods:{deincrement:function(){this.select_product_info.product_amount--,this.select_product_info.product_amount<0&&(alert("數量不可輸入負數!!!"),this.select_product_info.product_amount=0)},checkorder:function(){return this.error_list=[],this.select_product_info.product_id||this.error_list.push("請選擇商品ID。"),this.select_product_info.product_amount||this.error_list.push("請輸入商品數量。"),this.select_product_info.customer_id||this.error_list.push("請輸入用戶ID。"),this.error_list.length<=0},sendordermsg:function(){var t=this;this.checkorder()&&v.a.post("http://127.0.0.1:8000/api/Addorder/",this.select_product_info).then((function(e){200===e.data.status&&(t.$bus.$emit("update_select_list",{product_id:t.select_product_info.product_id,product_amount:t.select_product_info.product_amount}),t.select_product_info.product_id="",t.select_product_info.product_amount="",t.select_product_info.customer_id="",t.select_product_info.isVip=!1),alert(e.data.msg)}))}},watch:{"select_product_info.product_amount":{deep:!0,handler:function(t){t<0&&(alert("數量輸入有誤!"),this.select_product_info.product_amount=0)}}}},g=y,k=(r("7aae"),Object(l["a"])(g,m,b,!1,null,"604dcf0c",null)),C=k.exports,O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Product_info_container"},[r("h2",[t._v("商品列表")]),r("table",{staticClass:"product_table"},[t._m(0),r("tbody",t._l(t.select_list,(function(e){return r("tr",{key:e.id},[r("th",[t._v(t._s(e.product_id))]),r("th",[t._v(t._s(e.stock_pcs))]),r("th",[t._v(t._s(e.price))]),r("th",[t._v(t._s(e.shop_id))]),r("th",[e.vip?r("span",{staticClass:"isvip"}):r("span",{staticClass:"notvip"})])])})),0)])])},$=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("Product_ID")]),r("th",[t._v("Stock_pcs")]),r("th",[t._v("Price")]),r("th",[t._v("Shop_ID")]),r("th",[t._v("Vip")])])])}],x={name:"ProductTable",props:["select_list"]},P=x,T=(r("b968"),Object(l["a"])(P,O,$,!1,null,"71c794ba",null)),w=T.exports,j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Order_info"},[r("h2",[t._v("商品訂單")]),r("table",{staticClass:"order_table"},[t._m(0),r("tbody",t._l(t.order_list,(function(e){return r("tr",{key:e.id},[r("th",[t._v(t._s(e.id))]),r("th",[t._v(t._s(e.products.product_id))]),r("th",[t._v(t._s(e.qty))]),r("th",[t._v(t._s(e.price))]),r("th",[t._v(t._s(e.shop_id))]),r("th",[t._v(t._s(e.customers))]),r("th",[r("button",{staticClass:"deletebtn_pc",on:{click:function(r){return t.delete_order(e)}}},[t._v("Delete")]),r("button",{staticClass:"deletebtn_mobile",on:{click:function(r){return t.delete_order(e)}}},[r("span")])])])})),0)])])},D=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("Order_ID")]),r("th",[t._v("Product ID")]),r("th",[t._v("Qty")]),r("th",[t._v("Price")]),r("th",[t._v("Shop_ID")]),r("th",[t._v("Customer_ID")]),r("th",[t._v("Delete Order")])])])}];r("77ed");v.a.defaults.xsrfHeaderName="X-CSRFToken",v.a.defaults.xsrfCookieName="csrftoken";var E={name:"OrderInfo",props:["order_list"],methods:{delete_order:function(t){v.a.post("http://127.0.0.1:8000/api/Deleteinfo/",t).then((function(t){alert(t.data.msg)})),this.$bus.$emit("delete_order_list",t)}}},V=E,I=(r("3cea"),Object(l["a"])(V,j,D,!1,null,"31014d58",null)),S=I.exports,A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Top_contaniner"},[r("transition",{attrs:{appear:"",name:"animate__animated animate__bounce","enter-active-class":"animate__flash","leave-active-class":"animate__backOutDown"}},[r("h2",[t._v("Top3")])]),r("table",{staticClass:"Top_table"},[t._m(0),r("tbody",t._l(t.top_list,(function(e,o){return r("tr",{key:e.id},[r("th",0===o?[r("span",{staticClass:"Top1"})]:1===o?[r("span",{staticClass:"Top2"})]:[r("span",{staticClass:"Top3"})]),r("th",[t._v(t._s(e.product_id))]),r("th",[t._v(t._s(e.price))])])})),0)])],1)},M=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("Rank")]),r("th",[t._v("Product_ID")]),r("th",[t._v("Price")])])])}],N={name:"Top",props:["top_list"]},H=N,R=(r("0c10"),Object(l["a"])(H,A,M,!1,null,"e618d51a",null)),q=R.exports,F={name:"Main",data:function(){return{select_list:[],order_list:[],top_list:[]}},components:{AddOrder:C,Product_table:w,Order_info:S,Top:q},mounted:function(){var t=this;v.a.all([v.a.get("http://127.0.0.1:8000/api/Product_info/"),v.a.get("http://127.0.0.1:8000/api/Orderinfo/"),v.a.get("http://127.0.0.1:8000/api/Topinfo/")]).then(v.a.spread((function(e,r,o){t.select_list=e.data,t.order_list=r.data,t.top_list=o.data}))),this.$bus.$on("update_select_list",this.update_select_list),this.$bus.$on("delete_order_list",this.delete_order_lits)},methods:{update_select_list:function(t){var e=this,r=t.product_id,o=t.product_amount;this.select_list.forEach((function(t){t.product_id===r&&(t.stock_pcs-=o),v.a.all([v.a.get("http://127.0.0.1:8000/api/Orderinfo/"),v.a.get("http://127.0.0.1:8000/api/Topinfo/")]).then(v.a.spread((function(t,r){e.order_list=t.data,e.top_list=r.data})))})),v.a.get("http://127.0.0.1:8000/api/Orderinfo/").then((function(t){e.order_list=t.data}))},delete_order_lits:function(t){var e=this,r=t.id,o=t.products,n=t.qty;this.order_list=this.order_list.filter((function(t){return t.id!=r})),this.select_list.forEach((function(t){t.product_id===o.product_id&&(0===t.stock_pcs&&setTimeout((function(){alert("商品:".concat(o.product_id,"又有庫存囉!!!"))}),1e3),t.stock_pcs+=n),v.a.get("http://127.0.0.1:8000/api/Topinfo/").then((function(t){e.top_list=t.data}))}))}}},J=F,U=(r("ea42"),Object(l["a"])(J,p,f,!1,null,"5452a40b",null)),X=U.exports,Q={name:"App",components:{Header:d,Main:X}},z=Q,B=(r("5c0b"),Object(l["a"])(z,n,i,!1,null,null,null)),G=B.exports;o["a"].config.productionTip=!1,new o["a"]({el:"#app",render:function(t){return t(G)},beforeCreate:function(){o["a"].prototype.$bus=this}})},"5c0b":function(t,e,r){"use strict";r("9c0c")},6307:function(t,e,r){},"7a9a":function(t,e,r){},"7aae":function(t,e,r){"use strict";r("7a9a")},"9c0c":function(t,e,r){},"9ce7":function(t,e,r){},b968:function(t,e,r){"use strict";r("9ce7")},c42c:function(t,e,r){},e370:function(t,e,r){"use strict";r("c42c")},ea42:function(t,e,r){"use strict";r("324d")}});
//# sourceMappingURL=app.a6df3706.js.map